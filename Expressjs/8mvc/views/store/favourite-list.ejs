<%- include('../partials/head') %>
</head>
<body class="bg-gradient-to-br from-gray-100 to-white text-gray-800 min-h-screen">
  <%- include('../partials/navbar') %>

  <div class="max-w-7xl mx-auto mt-16 px-4 sm:px-8 pb-16">
    <!-- Header -->
    <div class="text-center mb-12">
      <h1 class="text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-indigo-500 to-pink-500">
        üè° Welcome to Airbnb
      </h1>
      <p class="text-gray-500 mt-2 text-lg">Find your perfect stay listed below</p>
    </div>

    <!-- Homes Grid -->
    <ul class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10 list-none">
      <% registeredHomes.forEach((home) => { %>
        <li class="flex flex-col bg-white rounded-3xl shadow-xl hover:shadow-2xl transition-shadow duration-300 overflow-hidden border border-gray-100">
          
          <!-- Image -->
          <div class="h-52 w-full overflow-hidden">
            <img src="<%= home.imageUrl %>" alt="Home image" class="w-full h-full object-cover" />
          </div>

          <!-- Content -->
          <div class="p-6 flex flex-col gap-4 flex-grow">
            
            <!-- Title -->
            <h2 class="text-2xl font-bold text-indigo-600 flex items-center gap-2">
              üè† <%= home.addhome %>
            </h2>

            <!-- Price -->
            <p class="text-gray-700 text-base">
              üí∞ <span class="font-medium">Price:</span> ‚Çπ<%= home.price %>
            </p>

            <!-- Location -->
            <p class="text-gray-700 text-base">
              üìç <span class="font-medium">Location:</span> <%= home.location %>
            </p>

            <!-- Rating -->
            <div class="flex items-center text-yellow-500 text-lg">
              <% 
                const rating = Number(home.rating) || 0;
                const fullStars = Math.floor(rating);
                const emptyStars = 5 - fullStars;
              %>
              <% for(let i = 0; i < fullStars; i++) { %>
                <span>‚òÖ</span>
              <% } %>
              <% for(let i = 0; i < emptyStars; i++) { %>
                <span>‚òÜ</span>
              <% } %>
              <span class="ml-2 text-gray-700 text-base font-medium"><%= rating.toFixed(1) %>/5</span>
            </div>

            <!-- Actions -->
            <div class="flex flex-col gap-3 mt-auto">
              
              <!-- Remove from Favourite -->
              <form action="/favourites/delete" method="POST">
                <input type="hidden" name="id" value="<%- home.id %>">
                <button 
                  type="submit" 
                  class="w-full flex items-center justify-center gap-2 
                         text-white bg-red-500 hover:bg-red-600 
                         focus:ring-4 focus:ring-red-300 
                         font-medium rounded-lg text-sm px-5 py-2.5 
                         transition-all duration-200"
                >
                  <i class="fas fa-trash-alt"></i>
                  Remove from Favourite
                </button>
              </form>

              <!-- Book -->
              <button 
                type="button" 
                class="w-full flex items-center justify-center gap-2 
                       text-white bg-green-700 hover:bg-green-800 
                       focus:ring-4 focus:ring-green-300 
                       font-medium rounded-lg text-sm px-5 py-2.5 
                       transition-all duration-200"
              >
                <i class="fas fa-calendar-check"></i>
                Book
              </button>

              <!-- Details -->
              <a href="/homedetails/<%= home.id %>" 
                class="w-full flex items-center justify-center gap-2 
                       text-white bg-yellow-400 hover:bg-yellow-500 
                       focus:ring-4 focus:ring-yellow-300 
                       font-medium rounded-lg text-sm px-5 py-2.5 
                       transition-all duration-200"
              >
                <i class="fas fa-info-circle"></i>
                Details
              </a>
            </div>

          </div>
        </li>
      <% }) %>
    </ul>
  </div>
</body>
</html>
